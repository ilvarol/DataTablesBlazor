// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace DataTablesBlazor.Client.Components.DataTables
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using DataTablesBlazor.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using DataTablesBlazor.Client.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using DataTablesBlazor.Client.Components.Base;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using DataTablesBlazor.Client.Components.DataTables;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using DataTablesBlazor.Shared.Models.DataTables;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using DataTablesBlazor.Shared.Models.Mock;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using System.Text.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\_Imports.razor"
using System.Text;

#line default
#line hidden
#nullable disable
    public partial class PaginateButtonList<Type> : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 34 "C:\Users\ilyas.varol\source\repos\DataTablesBlazor\DataTablesBlazor\Client\Components\DataTables\PaginateButtonList.razor"
       

    private string _disabledNext = "", _disabledPrevious = "";
    private int _maxnumber;

    private IList<PaginateButton> List { get; set; }

    protected override Task OnInitializedAsync()
    {
        DataTablesRequest.CurrentNumber = 1;

        RefreshList(true);

        return base.OnInitializedAsync();
    }

    [CascadingParameter]
    private Table<Type> Parent { get; set; }

    [Parameter]
    public DataTablesRequest DataTablesRequest { get; set; }

    [Parameter]
    public DataTablesResponse<Type> DataTablesResponse { get; set; }


    [Parameter]
    public EventCallback<DataTablesRequest> DataTablesRequestChanged { get; set; }

    [Parameter]
    public EventCallback<DataTablesResponse<Type>> DataTablesResponseChanged { get; set; }


    private int From
    {
        get
        {
            return DataTablesRequest.CurrentNumber * DataTablesRequest.Length - DataTablesRequest.Length + 1;
        }
    }

    private int To
    {
        get
        {
            return DataTablesRequest.CurrentNumber * DataTablesRequest.Length;
        }
    }


    public void OnClick(PaginateButton ClickedButton)
    {
        DataTablesRequest.CurrentNumber = ClickedButton.Number;

        RefreshList(true);
    }

    public void PreviousClick()
    {
        if (DataTablesRequest.CurrentNumber > 1)
            DataTablesRequest.CurrentNumber -= 1;

        RefreshList(true);
    }

    public void NextClick()
    {
        if (DataTablesRequest.CurrentNumber < _maxnumber)
            DataTablesRequest.CurrentNumber += 1;

        RefreshList(true);
    }


    public void RefreshList(bool refresh = false)
    {
        int pageCount = (int)Math.Ceiling((double)DataTablesResponse.RecordsFiltered / (double)DataTablesRequest.Length);

        _maxnumber = pageCount;

        List = new List<PaginateButton>();

        List.Add(new PaginateButton() { Number = 1 });

        var startingIndex = 2;

        if (pageCount >= 2)
        {
            if (DataTablesRequest.CurrentNumber - 1 <= 3)
            {
                List.Add(new PaginateButton() { Number = 2 });

                startingIndex = 3;
            }
            else
            {
                startingIndex = DataTablesRequest.CurrentNumber - 1;
            }

            int i = 0;

            if (pageCount > 5 && pageCount - DataTablesRequest.CurrentNumber <= 3)
            {
                i -= 3;
                startingIndex = pageCount - 4;
            }

            for (; startingIndex < pageCount; startingIndex++)
            {
                List.Add(new PaginateButton() { Number = startingIndex });

                if (++i == 3) break;
            }

            if (pageCount > 2)
                List.Add(new PaginateButton() { Number = pageCount });
        }

        List = List.OrderBy(o => o.Number).ToList();

        if (DataTablesRequest.CurrentNumber == pageCount) _disabledNext = "disabled"; else _disabledNext = "";
        if (DataTablesRequest.CurrentNumber == 1) _disabledPrevious = "disabled"; else _disabledPrevious = "";

        foreach (var item in List)
        {
            item.IsCurrent = item.Number == DataTablesRequest.CurrentNumber;
            item.SetCurrentClass();
        }

        if (refresh)
        {
            DataTablesRequest.Start = From - 1;

            Parent.RefreshData();
        }
    }

    protected override Task OnParametersSetAsync()
    {
        RefreshList();

        return base.OnParametersSetAsync();
    }


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
